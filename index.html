<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create Map Search Links</title>
  <link rel="icon" type="image/png" href="/images/favicon.png">
  <link rel="stylesheet" href="bootstrap.min.css">
  <script src="./popper.min.js"></script>
  <script src="./bootstrap.min.js"></script>
  <style>
    :root {
      --body-color: #1a1a1a;
      --collapse-bg: #F7F7F7;
      --collapse-color: #1a1a1a;
      --collapse-line-color: #acacde;
      --collapse-icon-color: #b8336a;
    }

    body {
      margin: 0;
      padding: 0;
      font-size: 1.2rem;
      line-height: 1.2;
      color: var(--body-color);
      background: #ffffff;
    }

    .container {
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .search-box {
      margin-bottom: 20px;
    }

    .search-box input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    details {
      background: var(--collapse-bg);
      color: var(--collapse-color);
      border-radius: 8px;
      margin: 10px 0;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    summary {
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      padding: 1rem;
      font-weight: bold;
    }

    .details-info {
      border-top: 1px solid var(--collapse-line-color);
      padding: 1rem;
    }

    button {
      background: var(--accent-color);
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
    }

    .searchicon, .clearicon {
      width: 20px;
      height: 20px;
      fill: currentColor;
    }

    .clearicon {
      fill: #999;
    }

    .hidden {
      display: none;
    }

    button:hover {
      background: #999;
    }

    .error-message {
      color: red;
      font-size: 0.95rem;
      margin-top: 5px;
    }

    @media (max-width: 768px) {
      .details-info {
        padding: 0.5rem;
      }
      .container {
        padding: 10px;
      }
    }
  </style>
</head>
<body>

<div class="container text-center">
  <a href="Index.html"><img src="images/refresh.png"></a></br>
  </br>
  <h2><b><span style='background:rgb(0, 200, 122)'>Create Map Search Links</span></b></h2>
  </br>
  <a href="https://maps.google.com/" target="_blank"><img src="images/googlemapsicon.png" style="height:75px;"></a></br>
  </br>

<div class="col-md-6 offset-md-3 mt-4">
<h4><b><span style='background:rgb(169, 213, 181)'>Search by Query</span></b></h4>
</br>

  <div class="input-group mb-3">
    <input type="text" id="queryInput" class="form-control" placeholder="Enter Query" aria-label="Query">
    <div class="input-group-append">
      <!-- Clear Button -->
      <button class="btn btn-outline-secondary" id="clearBtnQuery">
        <svg class="clearicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
          <path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3l105.4 105.3c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256z"/>
        </svg>
      </button>
      <!-- Search Button -->
      <button class="btn btn-outline-secondary" id="searchBtnQuery">
        <svg class="searchicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
          <path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6 .1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Google Maps -->
  <details id="Querysection1" class="hidden">
    <summary>
        <img src="images/googlemaps.png" style="height:26px;">
    </summary>
    <div class="details-info" id="QuerysectionDetails1"></div>
  </details>

  <!-- Waze Maps -->
  <details id="Querysection2" class="hidden">
    <summary>
        <img src="images/wazemaps.png" style="height:26px;">
    </summary>
    <div class="details-info" id="QuerysectionDetails2"></div>
  </details>

  <!-- Apple Maps -->
  <details id="Querysection3" class="hidden">
    <summary>
        <img src="images/applemaps.png" style="height:26px;">
    </summary>
    <div class="details-info" id="QuerysectionDetails3"></div>
  </details>

  <!-- Bing Maps -->
  <details id="Querysection4" class="hidden">
    <summary>
        <img src="images/bingmaps.png" style="height:26px;">
    </summary>
    <div class="details-info" id="QuerysectionDetails4"></div>
  </details>

  <!-- Esri ArcGIS Maps -->
  <details id="Querysection5" class="hidden">
    <summary>
        <img src="images/arcgismaps.png" style="height:26px;">
    </summary>
    <div class="details-info" id="QuerysectionDetails5"></div>
  </details>

  <!-- Aerial Imagery Source -->
  <details id="Querysection6" class="hidden">
    <summary>
        <img src="images/aerialimagerysource.png" style="height:26px;">
    </summary>
    <div class="details-info" id="QuerysectionDetails6"></div>
  </details>

<hr/>

<h4><b><span style='background:rgb(169, 213, 181)'>Search by Coordinates</span></b></h4>
</br>
<img src="images/coordinates.png" style="height:75px;"></a></br>
<b><span style='color:rgb(26, 115, 232);font-size: 1rem;'>Enter location as comma-separated latitude/longitude coordinates</span></b></br>
</br>

  <div class="input-group mb-3">
    <input type="text" id="coordInput" class="form-control" placeholder="Enter coordinates" aria-label="Coordinates">
    <div class="input-group-append">
      <!-- Clear Button -->
      <button class="btn btn-outline-secondary" id="clearBtn">
        <svg class="clearicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
          <path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3l105.4 105.3c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256z"/>
        </svg>
      </button>
      <!-- Search Button -->
      <button class="btn btn-outline-secondary" id="searchBtn">
        <svg class="searchicon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
          <path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6 .1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/>
        </svg>
      </button>
    </div>
  </div>
  <div id="errorMsg" class="error-message hidden">Invalid input. Please enter coordinates in the format: Latitude,Longitude</div>

  <!-- Google Maps -->
  <details id="section1" class="hidden">
    <summary><img src="images/googlemaps.png" style="height:26px;"></summary>
    <div class="details-info" id="sectionDetails1"></div>
  </details>

  <!-- Waze Maps -->
  <details id="section2" class="hidden">
    <summary><img src="images/wazemaps.png" style="height:26px;"></summary>
    <div class="details-info" id="sectionDetails2"></div>
  </details>

  <!-- Apple Maps -->
  <details id="section3" class="hidden">
    <summary><img src="images/applemaps.png" style="height:26px;"></summary>
    <div class="details-info" id="sectionDetails3"></div>
  </details>

  <!-- Bing Maps -->
  <details id="section4" class="hidden">
    <summary><img src="images/bingmaps.png" style="height:26px;"></summary>
    <div class="details-info" id="sectionDetails4"></div>
  </details>

  <!-- Esri ArcGIS Maps -->
  <details id="section5" class="hidden">
    <summary><img src="images/arcgismaps.png" style="height:26px;"></summary>
    <div class="details-info" id="sectionDetails5"></div>
  </details>

</div>

<script>

// JavaScript Section Start

// -------------------
// Search by Query
// -------------------

document.getElementById('clearBtnQuery').addEventListener('click', function() {
  // Clear the textbox
  document.getElementById('queryInput').value = '';
  // Hide collapsible sections
  ["Querysection1","Querysection2","Querysection3","Querysection4","Querysection5","Querysection6"].forEach(id =>
    document.getElementById(id).classList.add("hidden")
  );
});

function performSearch() {
  const textInput = document.getElementById('queryInput').value.trim();

  if (!textInput) return; // stop if empty

  // Detect coordinates of form "lat,lng" or "lat, lng"
  let reversedCoords = null;
  let wazewithCoords = null;
  let esriwithCoords1 = null;
  let esriwithCoords2 = null;
  let esriwithCoords3 = null;
  let esrigovwithCoords1 = null;
  let esrigovwithCoords2 = null;
  let esrigovwithCoords3 = null;
  let esrigovwithCoords4 = null;
  let esrigovwithCoords5 = null;
  const coordMatch = textInput.match(/^\s*(-?\d+(\.\d+)?)\s*,\s*(-?\d+(\.\d+)?)\s*$/);
  if (coordMatch) {
    const lat = coordMatch[1];
    const lng = coordMatch[3];
    reversedCoords = `${lng},${lat}`;
    wazewithCoords = `https://www.waze.com/ul?ll=${lat}%2C${lng}&navigate=yes`;
    esriwithCoords1 = `https://www.arcgis.com/apps/mapviewer/index.html?webmap=55ebf90799fa4a3fa57562700a68c405&marker=${lng},${lat}&center=${lng},${lat}&level=18`;
    esriwithCoords2 = `https://www.arcgis.com/apps/mapviewer/index.html?webmap=28f49811a6974659988fd279de5ce39f&marker=${lng},${lat}&center=${lng},${lat}&level=18`;
    esriwithCoords3 = `https://livingatlas.arcgis.com/wayback/#mapCenter=${lng}%2C${lat}%2C19`;
    esrigovwithCoords1 = `https://www.arcgis.com/apps/mapviewer/index.html?url=https://maps2.simcoe.ca/arcgis/rest/services/Public/Ortho_2024_Cache/MapServer&source=sd&marker=${lng},${lat}&center=${lng},${lat}&level=18`;
    esrigovwithCoords2 = `https://www.arcgis.com/apps/mapviewer/index.html?url=https://gisapps.barrie.ca/image/rest/services/Public/Barrie_Ortho_2024_10cm_Cache_WebMercator/MapServer&marker=${lng},${lat}&center=${lng},${lat}&level=18`;
    esrigovwithCoords3 = `https://www.arcgis.com/apps/mapviewer/index.html?url=https://exwai.maps.mississauga.ca/img/rest/services/Imagery/2024_Aerial_Imagery/ImageServer&source=sd&marker=${lng},${lat}&center=${lng},${lat}&level=18`;
    esrigovwithCoords4 = `https://www.arcgis.com/apps/mapviewer/index.html?url=https://maps1.brampton.ca/image/rest/services/Imagery/BRAM2025S_SID_MOSAIC/ImageServer&source=sd&marker=${lng},${lat}&center=${lng},${lat}&level=18`;
    esrigovwithCoords5 = `https://www.arcgis.com/apps/mapviewer/index.html?url=https://gis.toronto.ca/arcgis/rest/services/basemap/cot_ortho_2024_color_8cm/MapServer&source=sd&marker=${lng},${lat}&center=${lng},${lat}&level=18`;
  }

  // Encode query
  const encoded = encodeURIComponent(textInput)
    .replace(/!/g, '%21')
    .replace(/\*/g, '%2A')
    .replace(/'/g, '%27')
    .replace(/\(/g, '%28')
    .replace(/\)/g, '%29')
    .replace(/-/g, '-') 
    .replace(/_/g, '_') 
    .replace(/\./g, '.') 
    .replace(/~/g, '~');

  const queryString = encoded;
  const wazewithoutCoords = `https://waze.com/ul?q=${queryString}&navigate=yes`;
  const esriwithoutCoords1 = `https://www.arcgis.com/apps/mapviewer/index.html?webmap=55ebf90799fa4a3fa57562700a68c405&find=${queryString}`;
  const esriwithoutCoords2 = `https://www.arcgis.com/apps/mapviewer/index.html?webmap=28f49811a6974659988fd279de5ce39f&find=${queryString}`;
  const esriwithoutCoords3 = `https://livingatlas.arcgis.com/wayback/`;
  const esrigovwithoutCoords1 = `https://www.arcgis.com/apps/mapviewer/index.html?url=https://maps2.simcoe.ca/arcgis/rest/services/Public/Ortho_2024_Cache/MapServer&source=sd&find=${queryString}`;
  const esrigovwithoutCoords2 = `https://www.arcgis.com/apps/mapviewer/index.html?url=https://gisapps.barrie.ca/image/rest/services/Public/Barrie_Ortho_2024_10cm_Cache_WebMercator/MapServer&find=${queryString}`;
  const esrigovwithoutCoords3 = `https://www.arcgis.com/apps/mapviewer/index.html?url=https://exwai.maps.mississauga.ca/img/rest/services/Imagery/2024_Aerial_Imagery/ImageServer&source=sd&find=${queryString}`;
  const esrigovwithoutCoords4 = `https://www.arcgis.com/apps/mapviewer/index.html?url=https://maps1.brampton.ca/image/rest/services/Imagery/BRAM2025S_SID_MOSAIC/ImageServer&source=sd&find=${queryString}`;
  const esrigovwithoutCoords5 = `https://www.arcgis.com/apps/mapviewer/index.html?url=https://gis.toronto.ca/arcgis/rest/services/basemap/cot_ortho_2024_color_8cm/MapServer&source=sd&find=${queryString}`;
  
  // Esri needs reversed coordinates if it's a coordinate input
  const esriQueryString = reversedCoords
    ? encodeURIComponent(reversedCoords) 
    : queryString;

  // Waze (With coordinates or without link)
  const wazeLink = wazewithCoords
    ? (wazewithCoords)
    : wazewithoutCoords;

  // Esri (With coordinates or without link): Web Map Link - Map View
  const esriLink1 = esriwithCoords1
    ? (esriwithCoords1)
    : esriwithoutCoords1;

  // Esri (With coordinates or without link): Web Map Link - Aerial View
  const esriLink2 = esriwithCoords2
    ? (esriwithCoords2)
    : esriwithoutCoords2;

  // Esri (With coordinates or without link): Web Map Link - Wayback Aerial View
  const esriLink3 = esriwithCoords3
    ? (esriwithCoords3)
    : esriwithoutCoords3;

  // Esri Gov (With coordinates or without link): Web Map Link - Aerial View
  const esrigovLink1 = esrigovwithCoords1
    ? (esrigovwithCoords1)
    : esrigovwithoutCoords1;

  // Esri Gov (With coordinates or without link): Web Map Link - Aerial View
  const esrigovLink2 = esrigovwithCoords2
    ? (esrigovwithCoords2)
    : esrigovwithoutCoords2;

  // Esri Gov (With coordinates or without link): Web Map Link - Aerial View
  const esrigovLink3 = esrigovwithCoords3
    ? (esrigovwithCoords3)
    : esrigovwithoutCoords3;

  // Esri Gov (With coordinates or without link): Web Map Link - Aerial View
  const esrigovLink4 = esrigovwithCoords4
    ? (esrigovwithCoords4)
    : esrigovwithoutCoords4;

  // Esri Gov (With coordinates or without link): Web Map Link - Aerial View
  const esrigovLink5 = esrigovwithCoords5
    ? (esrigovwithCoords5)
    : esrigovwithoutCoords5;

  let googlemapsLink1 = 'https://maps.google.com/maps?q=' + queryString;
  let googlemapsLink2 = 'http://maps.google.com/maps?t=k&q=' + queryString;
  let googlemapsLink3 = 'https://www.google.com/maps/dir/?api=1&destination=' + queryString +'&travelmode=driving&dir_action=navigate';
  let applemapsLink1 = 'https://maps.apple.com/search?query=' + queryString;
  let applemapsLink2 = 'https://maps.apple.com/search?query=' + queryString + '&map=hybrid';
  let applemapsLink3 ='https://maps.apple.com/directions?destination=' + queryString + '&mode=driving';
  let bingmapsLink1 = 'https://www.bing.com/maps?q=' + queryString;
  let bingmapsLink2 = 'https://www.bing.com/maps?q=' + queryString + '&style=h';

  let esrimapswebgovLink1 = 'https://www.arcgis.com/apps/mapviewer/index.html?url=https://maps2.simcoe.ca/arcgis/rest/services/Public/Ortho_2024_Cache/MapServer&source=sd&find=' + esriQueryString;  // Web Map: Search for location (Simcoe County, ON Aerial View 2024)
  let esrimapswebgovLink2 = 'https://www.arcgis.com/apps/mapviewer/index.html?url=https://gisapps.barrie.ca/image/rest/services/Public/Barrie_Ortho_2024_10cm_Cache_WebMercator/MapServer&find=' + esriQueryString; // Web Map: Search for location (Barrie, ON Aerial View 2024)
  let esrimapswebgovLink3 = 'https://www.arcgis.com/apps/mapviewer/index.html?url=https://exwai.maps.mississauga.ca/img/rest/services/Imagery/2024_Aerial_Imagery/ImageServer&source=sd&find=' + esriQueryString; // Web Map: Search for location (Mississauga, ON Aerial View 2024)
  let esrimapswebgovLink4 = 'https://www.arcgis.com/apps/mapviewer/index.html?url=https://maps1.brampton.ca/image/rest/services/Imagery/BRAM2025S_SID_MOSAIC/ImageServer&source=sd&find=' + esriQueryString; // Web Map: Search for location (Brampton, ON Aerial View 2025)
  let esrimapswebgovLink5 = 'https://www.arcgis.com/apps/mapviewer/index.html?url=https://gis.toronto.ca/arcgis/rest/services/basemap/cot_ortho_2024_color_8cm/MapServer&source=sd&find=' + esriQueryString; // Web Map: Search for location (Toronto, ON Aerial View 2024)

  let esrimapsappLink1 = 'https://explorer.arcgis.app?itemID=55ebf90799fa4a3fa57562700a68c405&search=' + queryString; // Android App: Search for location (Map View)
  let esrimapsappLink2 = 'https://explorer.arcgis.app?itemID=55ebf90799fa4a3fa57562700a68c405&center=' + queryString + '&scale=3000'; // Android App: Zoom in on location (Map View)
  let esrimapsappLink3 = 'https://explorer.arcgis.app?itemID=28f49811a6974659988fd279de5ce39f&search=' + queryString; // Android App: Search for location (Aerial View)
  let esrimapsappLink4 = 'https://explorer.arcgis.app?itemID=28f49811a6974659988fd279de5ce39f&center=' + queryString + '&scale=3000'; // Android App: Zoom in on location (Aerial View)

  // Esri ArcGIS Aerial Imagery Layers for: Barrie, ON
    // https://gisapps.barrie.ca/image/rest/services/Public
  
  // Esri ArcGIS Aerial Imagery Layers for: Simcoe County, ON
    // https://maps2.simcoe.ca/arcgis/rest/services/Public

  // Esri ArcGIS Aerial Imagery Layers for: Mississauga, ON
    // https://exwai.maps.mississauga.ca/img/rest/services/Imagery

  // Esri ArcGIS Aerial Imagery Layers for: Brampton, ON
    // https://maps1.brampton.ca/image/rest/services/Imagery

  // Esri ArcGIS Aerial Imagery Layers for: Toronto, ON
    // https://gis.toronto.ca/arcgis/rest/services/basemap

  // Populate Google Maps
  document.getElementById("QuerysectionDetails1").innerHTML = `
    <a href='${googlemapsLink1}' target="_blank"><img src="images/mapview.svg" style="width:26px"></a>&nbsp;
    <a href='${googlemapsLink1}' target='_blank'>Map View: Search Link</a><br><br>

    <a href='${googlemapsLink2}' target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href='${googlemapsLink2}' target='_blank'>Aerial View: Search Link</a><br><br>
    	
    <img src="images/divider.png"</a><br><br>
	
    <a href='${googlemapsLink3}' target="_blank"><img src="images/mapview.svg" style="width:26px"></a>&nbsp;
    <a href='${googlemapsLink3}' target='_blank'>Driving Directions Link</a>
  `;

  // Populate Waze Maps
  document.getElementById("QuerysectionDetails2").innerHTML = `
    <a href='${wazeLink}' target="_blank"><img src="images/mapview.svg" style="width:26px"></a>&nbsp;
    <a href='${wazeLink}' target='_blank'>Driving Directions Link</a>
  `;

  // Populate Apple Maps
  document.getElementById("QuerysectionDetails3").innerHTML = `
    <a href='${applemapsLink1}' target="_blank"><img src="images/mapview.svg" style="width:26px"></a>&nbsp;
    <a href='${applemapsLink1}' target='_blank'>Map View: Search Link</a><br><br>

    <a href='${applemapsLink2}' target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href='${applemapsLink2}' target='_blank'>Aerial View: Search Link</a><br><br>
    
    <img src="images/divider.png"</a><br><br>
	
    <a href='${applemapsLink3}' target="_blank"><img src="images/mapview.svg" style="width:26px"></a>&nbsp;
    <a href='${applemapsLink3}' target='_blank'>Driving Directions Link</a>
  `;

  // Populate Bing Maps
  document.getElementById("QuerysectionDetails4").innerHTML = `
    <a href='${bingmapsLink1}' target="_blank"><img src="images/mapview.svg" style="width:26px"></a>&nbsp;
    <a href='${bingmapsLink1}' target='_blank'>Map View: Search Link</a><br><br>

    <a href='${bingmapsLink2}' target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href='${bingmapsLink2}' target='_blank'>Aerial View: Search Link</a>
  `;

  // Populate Esri ArcGIS Maps
      // • Map layer provides one meter or better satellite and aerial imagery for most of the world's landmass and lower resolution satellite imagery worldwide
      // • Where available, high-resolution aerial photography comes directly from authoritative data sources: Cities, Counties, States, campuses, nations, and from local crowdsourced content
      // • Typically within 3-5 years of currency, for most of the world
  document.getElementById("QuerysectionDetails5").innerHTML = `
    <img src="images/webapp.svg" style="width:26px"></a>&nbsp;<strong>Web Map Links</strong></br></br>
   
    <a href='${esriLink1}' target="_blank"><img src="images/mapview.svg" style="width:26px"></a>&nbsp;
    <a href='${esriLink1}' target='_blank'>Map View: Search Link</a><br><br>

    <a href='${esriLink2}' target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href='${esriLink2}' target='_blank'>Aerial View: Search Link</a><br><br>

    <a href='${esriLink3}' target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href='${esriLink3}' target='_blank'>Wayback Aerial View: Search Link</a><br><br>

    <img src="images/divider.png"</a><br><br>
   
   <img src="images/androidapp.svg" style="width:26px"></a>&nbsp;<strong>Android App Links</strong></br></br>

    <img src="images/mapview.svg" style="width:26px"></a>&nbsp;Map View: Search Link</br>
    <a href='${esrimapsappLink1}' target="_blank"><img src="images/esrisearch.png" style="width:26px"></a>&nbsp;&nbsp;|&nbsp;&nbsp;
    <a href='${esrimapsappLink2}' target="_blank"><img src="images/esrizoom.png" style="width:26px"></a></br></br>

    <img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;Aerial View: Search Link</br>
    <a href='${esrimapsappLink3}' target="_blank"><img src="images/esrisearch.png" style="width:26px"></a>&nbsp;&nbsp;|&nbsp;&nbsp;
    <a href='${esrimapsappLink4}' target="_blank"><img src="images/esrizoom.png" style="width:26px"></a>
  `;

  // Populate Esri ArcGIS Maps
  document.getElementById("QuerysectionDetails6").innerHTML = `
    <strong>Government Orthoimagery (Aerial Imagery)</strong></br></br>
    <a href='${esrigovLink1}' target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href='${esrigovLink1}' target='_blank'>Simcoe County, ON Aerial View (2024): Search Link</a><br><br>

    <a href='${esrigovLink2}' target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href='${esrigovLink2}' target='_blank'>Barrie, ON Aerial View (2024): Search Link</a><br><br>

    <a href='${esrigovLink3}' target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href='${esrigovLink3}' target='_blank'>Mississauga, ON Aerial View (2024): Search Link</a><br><br>

    <a href='${esrigovLink4}' target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href='${esrigovLink4}' target='_blank'>Brampton, ON Aerial View (2025): Search Link</a><br><br>

    <a href='${esrigovLink5}' target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href='${esrigovLink5}' target='_blank'>Toronto, ON Aerial View (2024): Search Link</a>
  `;

  // Show sections collapsed
  ["Querysection1","Querysection2","Querysection3","Querysection4","Querysection5",,"Querysection6"].forEach(id => {
    const el = document.getElementById(id);
    el.classList.remove("hidden");
    el.open = false;
  });
}

// Trigger search on button click
document.getElementById('searchBtnQuery').addEventListener('click', performSearch);

// Trigger search on pressing Enter in the textbox
document.getElementById('queryInput').addEventListener('keydown', function(event) {
  if (event.key === 'Enter') performSearch();
});

// Toggle logic: keep only one open at a time
["Querysection1","Querysection2","Querysection3","Querysection4","Querysection5","Querysection6"].forEach(id => {
  document.getElementById(id).addEventListener('toggle', function() {
    if (this.open) {
      ["Querysection1","Querysection2","Querysection3","Querysection4","Querysection5","Querysection6"].forEach(otherId => {
        if (otherId !== id) document.getElementById(otherId).open = false;
      });
    }
  });
});

// -------------------
// Search by Coordinates
// -------------------

const coordInput = document.getElementById("coordInput");
const clearBtn = document.getElementById("clearBtn");
const searchBtn = document.getElementById("searchBtn");
const errorMsg = document.getElementById("errorMsg");

function parseCoordinates(input) {
  const parts = input.split(",");
  if (parts.length !== 2) return null;
  const lat = parseFloat(parts[0].trim());
  const lng = parseFloat(parts[1].trim());
  if (isNaN(lat) || isNaN(lng)) return null;
  return { lat, lng };
}

function generateLinks() {
  const coords = parseCoordinates(coordInput.value);
  if (!coords) {
    errorMsg.classList.remove("hidden");
    return;
  }
  errorMsg.classList.add("hidden");

  const { lat, lng } = coords;

  // Google Maps
  document.getElementById("sectionDetails1").innerHTML = `
    <a href="https://www.google.com/maps/search/?api=1&query=${lat},${lng}" target="_blank"><img src="images/mapview.svg" style="width:26px"></a>&nbsp;
    <a href="https://www.google.com/maps/search/?api=1&query=${lat},${lng}" target='_blank'>Map View: Search Link</a><br><br>
    <a href="http://maps.google.com/maps?t=k&q=loc:${lat}+${lng}" target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href="http://maps.google.com/maps?t=k&q=loc:${lat}+${lng}" target='_blank'>Aerial View: Search Link</a><br><br>

    <img src="images/divider.png"</a><br><br>
	
    <a href="https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}&travelmode=driving&dir_action=navigate" target="_blank"><img src="images/mapview.svg" style="width:26px"></a>&nbsp;
    <a href="https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}&travelmode=driving&dir_action=navigate" target='_blank'>Driving Directions Link</a>
  `;
  document.getElementById("section1").classList.remove("hidden");
  document.getElementById("section1").open = false;

  // Waze Maps
  document.getElementById("sectionDetails2").innerHTML = `
    <a href="https://www.waze.com/ul?ll=${lat},${lng}&navigate=yes" target="_blank"><img src="images/mapview.svg" style="width:26px"></a>&nbsp;
    <a href="https://www.waze.com/ul?ll=${lat},${lng}&navigate=yes" target='_blank'>Driving Directions Link</a>
  `;
  document.getElementById("section2").classList.remove("hidden");
  document.getElementById("section2").open = false;

  // Apple Maps
  document.getElementById("sectionDetails3").innerHTML = `
    <a href="https://maps.apple.com/place?coordinate=${lat},${lng}&map=explore" target="_blank"><img src="images/mapview.svg" style="width:26px"></a>&nbsp;
    <a href="https://maps.apple.com/place?coordinate=${lat},${lng}&map=explore" target='_blank'>Map View: Search Link</a><br><br>
    <a href="https://maps.apple.com/place?coordinate=${lat},${lng}&map=hybrid" target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href="https://maps.apple.com/place?coordinate=${lat},${lng}&map=hybrid" target='_blank'>Aerial View: Search Link</a><br><br>

    <img src="images/divider.png"</a><br><br>
	
    <a href="https://maps.apple.com/directions?destination=${lat},${lng}&map=explore&mode=driving" target="_blank"><img src="images/mapview.svg" style="width:26px"></a>&nbsp;
    <a href="https://maps.apple.com/directions?destination=${lat},${lng}&map=explore&mode=driving" target='_blank'>Driving Directions Link</a>
  `;
  document.getElementById("section3").classList.remove("hidden");
  document.getElementById("section3").open = false;

  // Bing Maps
  document.getElementById("sectionDetails4").innerHTML = `
    <a href="https://www.bing.com/maps?q=${lat},${lng}" target="_blank"><img src="images/mapview.svg" style="width:26px"></a>&nbsp;
    <a href="https://www.bing.com/maps?q=${lat},${lng}" target='_blank'>Map View: Search Link</a><br><br>
    <a href="https://www.bing.com/maps?q=${lat},${lng}&style=h" target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href="https://www.bing.com/maps?q=${lat},${lng}&style=h" target='_blank'>Aerial View: Search Link</a>
  `;
  document.getElementById("section4").classList.remove("hidden");
  document.getElementById("section4").open = false;

  // Esri ArcGIS Maps (lng,lat order)
  document.getElementById("sectionDetails5").innerHTML = `
    <a href="https://www.arcgis.com/apps/mapviewer/index.html?webmap=55ebf90799fa4a3fa57562700a68c405&marker=${lng},${lat}&center=${lng},${lat}&level=18" target="_blank"><img src="images/mapview.svg" style="width:26px"></a>&nbsp;
    <a href="https://www.arcgis.com/apps/mapviewer/index.html?webmap=55ebf90799fa4a3fa57562700a68c405&marker=${lng},${lat}&center=${lng},${lat}&level=18" target='_blank'>Map View: Search Link</a><br><br>
    <a href="https://www.arcgis.com/apps/mapviewer/index.html?webmap=28f49811a6974659988fd279de5ce39f&marker=${lng},${lat}&center=${lng},${lat}&level=18" target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href="https://www.arcgis.com/apps/mapviewer/index.html?webmap=28f49811a6974659988fd279de5ce39f&marker=${lng},${lat}&center=${lng},${lat}&level=18" target='_blank'>Aerial View: Search Link</a><br><br>
    <a href="https://livingatlas.arcgis.com/wayback/#mapCenter=${lng},${lat},19" target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href="https://livingatlas.arcgis.com/wayback/#mapCenter=${lng},${lat},19" target='_blank'>Wayback Aerial View: Search Link</a><br><br>

    <img src="images/divider.png"</a><br><br>

    <strong>Government Orthoimagery (Aerial Imagery)</strong></br></br>

    <a href="https://www.arcgis.com/apps/mapviewer/index.html?url=https://maps2.simcoe.ca/arcgis/rest/services/Public/Ortho_2024_Cache/MapServer&source=sd&marker=${lng},${lat}&center=${lng},${lat}&level=18" target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href="https://www.arcgis.com/apps/mapviewer/index.html?url=https://maps2.simcoe.ca/arcgis/rest/services/Public/Ortho_2024_Cache/MapServer&source=sd&marker=${lng},${lat}&center=${lng},${lat}&level=18" target='_blank'>Simcoe County, ON Aerial View (2024): Search Link</a><br><br>

    <a href="https://www.arcgis.com/apps/mapviewer/index.html?url=https://gisapps.barrie.ca/image/rest/services/Public/Barrie_Ortho_2024_10cm_Cache_WebMercator/MapServer&marker=${lng},${lat}&center=${lng},${lat}&level=18" target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href="https://www.arcgis.com/apps/mapviewer/index.html?url=https://gisapps.barrie.ca/image/rest/services/Public/Barrie_Ortho_2024_10cm_Cache_WebMercator/MapServer&marker=${lng},${lat}&center=${lng},${lat}&level=18" target='_blank'> Barrie, ON Aerial View (2024): Search Link</a><br><br>

    <a href="https://www.arcgis.com/apps/mapviewer/index.html?url=https://exwai.maps.mississauga.ca/img/rest/services/Imagery/2024_Aerial_Imagery/ImageServer&source=sd&marker=${lng},${lat}&center=${lng},${lat}&level=18" target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href="https://www.arcgis.com/apps/mapviewer/index.html?url=https://exwai.maps.mississauga.ca/img/rest/services/Imagery/2024_Aerial_Imagery/ImageServer&source=sd&marker=${lng},${lat}&center=${lng},${lat}&level=18" target='_blank'>Mississauga, ON Aerial View (2024): Search Link</a><br><br>

    <a href="https://www.arcgis.com/apps/mapviewer/index.html?url=https://maps1.brampton.ca/image/rest/services/Imagery/BRAM2025S_SID_MOSAIC/ImageServer&source=sd&marker=${lng},${lat}&center=${lng},${lat}&level=18" target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href="https://www.arcgis.com/apps/mapviewer/index.html?url=https://maps1.brampton.ca/image/rest/services/Imagery/BRAM2025S_SID_MOSAIC/ImageServer&source=sd&marker=${lng},${lat}&center=${lng},${lat}&level=18" target='_blank'>Brampton, ON Aerial View (2025): Search Link</a><br><br>

    <a href="https://www.arcgis.com/apps/mapviewer/index.html?url=https://gis.toronto.ca/arcgis/rest/services/basemap/cot_ortho_2024_color_8cm/MapServer&source=sd&marker=${lng},${lat}&center=${lng},${lat}&level=18" target="_blank"><img src="images/satelliteview.svg" style="width:26px"></a>&nbsp;
    <a href="https://www.arcgis.com/apps/mapviewer/index.html?url=https://gis.toronto.ca/arcgis/rest/services/basemap/cot_ortho_2024_color_8cm/MapServer&source=sd&marker=${lng},${lat}&center=${lng},${lat}&level=18" target='_blank'>Toronto, ON Aerial View (2024): Search Link</a>
  `;
  document.getElementById("section5").classList.remove("hidden");
  document.getElementById("section5").open = false;
}

searchBtn.addEventListener("click", generateLinks);

coordInput.addEventListener("keypress", e => {
  if (e.key === "Enter") generateLinks();
});

clearBtn.addEventListener("click", () => {
  coordInput.value = "";
  errorMsg.classList.add("hidden");
  ["section1","section2","section3","section4","section5"].forEach(id =>
    document.getElementById(id).classList.add("hidden")
  );
});

// Toggle logic: keep only one Coordinates panel open at a time
["section1","section2","section3","section4","section5"].forEach(id => {
  document.getElementById(id).addEventListener('toggle', function() {
    if (this.open) {
      ["section1","section2","section3","section4","section5"].forEach(otherId => {
        if (otherId !== id) document.getElementById(otherId).open = false;
      });
    }
  });
});

</script>


</body>
</html>